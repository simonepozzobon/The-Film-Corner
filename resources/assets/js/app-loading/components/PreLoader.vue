<template lang="html">
    <div id="preloader-frame" ref="preloader">
        <h2 ref="text">Loading</h2>
        <svg ref="svg" width="128px" height="128px" viewBox="0 0 38 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g id="loading" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <path ref="path1" d="M21.915,7.725 C18.898,7.725 16.452,10.171 16.452,13.187 C16.452,16.204 18.898,18.65 21.915,18.65 C24.932,18.65 27.377,16.204 27.377,13.187 C27.377,10.171 24.932,7.725 21.915,7.725 Z M9.721,5 C5.951,5 2.895,8.056 2.895,11.825 C2.895,15.595 5.951,18.65 9.721,18.65 C13.49,18.65 16.545,15.595 16.545,11.825 C16.545,8.056 13.49,5 9.721,5 Z M31.544,28.457 L36.416,30.394 L36.416,20.868 L31.321,22.916 L31.544,28.457 Z M1,33.992 L31.321,33.992 L31.321,18.651 L1,18.651 L1,33.992 Z" id="path-1" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path2" d="M29.702,31.166 L24.995,34.256 L29.702,31.166 Z M23.747,36.991 C24.771,36.991 25.601,36.161 25.601,35.137 C25.601,34.113 24.771,33.283 23.747,33.283 C22.723,33.283 21.893,34.113 21.893,35.137 C21.893,36.161 22.723,36.991 23.747,36.991 Z M16.418,4.736 L11.711,7.826 L16.418,4.736 Z M6.082,32.711 C7.232,32.711 8.164,31.779 8.164,30.629 C8.164,29.479 7.232,28.547 6.082,28.547 C4.932,28.547 4,29.479 4,30.629 C4,31.779 4.932,32.711 6.082,32.711 Z M16.766,23.211 L7.492,29.641 L16.766,23.211 Z M17.667,2 C16.642,2 15.812,2.831 15.812,3.854 C15.812,4.879 16.642,5.709 17.667,5.709 C18.691,5.709 19.521,4.879 19.521,3.854 C19.521,2.831 18.691,2 17.667,2 Z M7.548,8.588 C7.548,9.738 8.48,10.67 9.629,10.67 C10.779,10.67 11.711,9.738 11.711,8.588 C11.711,7.439 10.779,6.507 9.629,6.507 C8.48,6.507 7.548,7.439 7.548,8.588 Z M17.048,19.272 L10.618,9.999 L17.048,19.272 Z M32.816,30.147 C32.816,29.124 31.986,28.293 30.962,28.293 C29.938,28.293 29.108,29.124 29.108,30.147 C29.108,31.171 29.938,32.001 30.962,32.001 C31.986,32.001 32.816,31.171 32.816,30.147 Z M21.447,23.541 L29.706,29.268 L21.447,23.541 Z M31.182,11.262 C30.159,11.262 29.328,12.092 29.328,13.116 C29.328,14.141 30.159,14.971 31.182,14.971 C32.207,14.971 33.037,14.141 33.037,13.116 C33.037,12.092 32.207,11.262 31.182,11.262 Z M21.668,19.723 L29.927,13.997 L21.668,19.723 Z M22.184,21.411 C22.184,23.093 20.821,24.457 19.138,24.457 C17.456,24.457 16.092,23.093 16.092,21.411 C16.092,19.728 17.456,18.364 19.138,18.364 C20.821,18.364 22.184,19.728 22.184,21.411 Z" id="path-2" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path3" d="M28.294,8.992 L31.352,2.237 L28.294,8.992 Z M23.545,10.314 L26.603,3.559 L23.545,10.314 Z M18.796,11.636 L21.854,4.881 L18.796,11.636 Z M14.047,12.957 L17.105,6.202 L14.047,12.957 Z M9.298,14.279 L12.356,7.524 L9.298,14.279 Z M4.549,15.601 L7.607,8.846 L4.549,15.601 Z M31.656,2 L3,10.158 L4.549,15.601 L33.205,7.443 L31.656,2 Z M29.254,22.277 L34.045,16.617 L29.254,22.277 Z M24.325,22.248 L29.115,16.589 L24.325,22.248 Z M19.396,22.219 L24.186,16.559 L19.396,22.219 Z M14.466,22.189 L19.257,16.531 L14.466,22.189 Z M9.537,22.16 L14.327,16.501 L9.537,22.16 Z M4.607,22.131 L9.398,16.472 L4.607,22.131 Z M4.607,22.131 L34.402,22.131 L34.402,16.472 L4.607,16.472 L4.607,22.131 Z M17.495,29.153 L21.269,29.153 L17.495,29.153 Z M7.758,29.153 L15.231,29.153 L7.758,29.153 Z M7.758,26.341 L21.269,26.341 L7.758,26.341 Z M34.402,36.587 L4.607,36.587 L4.607,25.752 L4.607,22.131 L34.402,22.131 L34.402,36.587 Z" id="path-3" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path4" d="M1,29.756 L36.846,29.756 L1,29.756 Z M6.208,24.918 L1,29.756 L1,32.724 L36.846,32.724 L36.846,29.756 L36.846,29.531 L31.637,24.693 L6.208,24.918 Z M5.548,25.64 L32.517,25.64 L32.517,7 L5.548,7 L5.548,25.64 Z M8.089,23.186 L29.964,23.186 L29.964,9.535 L8.089,9.535 L8.089,23.186 Z" id="path-4" stroke="#252525" stroke-width="1.2"></path>
                <!-- <path ref="path5" d="M9.329,27.163 C7.292,27.163 5.648,28.808 5.648,30.845 C5.648,32.882 7.292,34.526 9.329,34.526 C11.367,34.526 13.011,32.882 13.011,30.845 C13.011,28.808 11.367,27.163 9.329,27.163 Z M32.562,27.14 C30.518,27.14 28.869,28.788 28.869,30.83 C28.869,32.877 30.518,34.526 32.562,34.526 C34.605,34.526 36.254,32.877 36.254,30.83 C36.254,28.788 34.605,27.14 32.562,27.14 Z M35.493,4.01 L29.488,4.01 L30.023,25.074 L34.956,25.074 L35.493,4.01 Z M10.616,4 C3.431,4 1,8.219 1,13.974 L1,14.508 L7.22,14.508 L7.22,13.974 C7.22,11.507 8.042,9.754 10.616,9.754 C12.189,9.754 13.297,10.899 13.297,12.794 C13.297,16.617 6.076,15.832 6.076,24.553 L6.076,25.089 L12.081,25.089 L12.081,24.553 C12.081,19.262 19.981,19.977 19.981,12.471 C19.981,8.326 17.157,4 10.616,4 Z M9.329,28.363 C10.698,28.363 11.811,29.476 11.811,30.845 C11.811,32.213 10.698,33.326 9.329,33.326 C7.961,33.326 6.848,32.213 6.848,30.845 C6.848,29.476 7.961,28.363 9.329,28.363 Z M32.562,28.34 C33.936,28.34 35.054,29.457 35.054,30.83 C35.054,32.206 33.936,33.326 32.562,33.326 C31.187,33.326 30.068,32.206 30.068,30.83 C30.068,29.457 31.187,28.34 32.562,28.34 Z M34.262,5.21 L33.787,23.874 L31.193,23.874 L30.719,5.21 L34.262,5.21 Z M10.616,5.2 C16.642,5.2 18.781,9.117 18.781,12.471 C18.781,15.931 16.858,17.29 14.822,18.729 C13.115,19.937 11.197,21.294 10.916,23.889 L7.291,23.889 C7.487,19.79 9.502,18.397 11.454,17.048 C12.95,16.015 14.496,14.946 14.496,12.794 C14.496,10.297 12.901,8.554 10.616,8.554 C8.983,8.554 6.3,9.191 6.04,13.308 L2.212,13.308 C2.407,7.781 5.092,5.2 10.616,5.2 Z" id="path-5" fill="#252525"></path> -->
                <path ref="path6" d="M30.51,4.525 L30.51,2 L30.51,4.525 Z M7.883,4.525 L7.883,2 L7.883,4.525 Z M30.51,12.293 L30.51,19.329 L30.51,12.293 Z M7.883,37.614 L30.51,23.191 L30.51,22.66 L7.883,37.614 Z M6,22.999 L32.491,22.999 L32.491,19.33 L6,19.33 L6,22.999 Z M7.883,12.244 L7.883,19.93 L7.883,12.244 Z M7.883,22.66 L7.883,23.141 L30.51,37.565 L7.883,22.66 Z M6,12.268 L32.491,12.268 L32.491,4.778 L6,4.778 L6,12.268 Z" id="path-6" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path7" d="M9,37.614 L28.468,37.614 L9,37.614 Z M11.467,37.614 L26.001,37.614 L26.001,34.196 L11.467,34.196 L11.467,37.614 Z M14.406,34.196 L23.063,34.196 L23.063,31.505 L14.406,31.505 L14.406,34.196 Z M16.811,31.504 C16.811,31.504 17.097,30.379 17.097,29.847 C17.097,29.316 16.402,27.721 16.3,26.392 C16.197,25.063 16.494,23.837 16.494,23.837 L16.494,22.507 C16.494,22.507 15.912,21.444 15.912,19.522 C15.912,17.6 16.361,16.006 16.361,16.006 L16.238,14.861 C16.238,14.861 15.931,14.799 15.483,14.512 C15.032,14.226 14.971,13.593 14.868,13.081 C14.767,12.57 14.501,10.608 14.501,10.608 C14.501,10.608 14.255,10.239 14.255,9.156 C14.255,8.072 15.706,7.52 15.706,7.52 C15.706,7.52 16.934,6.866 17.181,6.702 C17.425,6.539 17.629,6.048 17.425,5.557 C17.22,5.067 17.323,3.656 17.323,2.859 C17.323,2.061 18.305,2 18.735,2 C19.163,2 20.145,2.061 20.145,2.859 C20.145,3.656 20.247,5.067 20.042,5.557 C19.838,6.048 20.042,6.539 20.287,6.702 C20.533,6.866 21.76,7.52 21.76,7.52 C21.76,7.52 23.213,8.072 23.213,9.156 C23.213,10.239 22.965,10.608 22.965,10.608 C22.965,10.608 22.701,12.57 22.598,13.081 C22.496,13.593 22.436,14.226 21.985,14.512 C21.536,14.799 21.228,14.861 21.228,14.861 L21.105,16.006 C21.105,16.006 21.555,17.6 21.555,19.522 C21.555,21.444 20.972,22.507 20.972,22.507 L20.972,23.837 C20.972,23.837 21.27,25.063 21.167,26.392 C21.064,27.721 20.37,29.316 20.37,29.847 C20.37,30.379 20.656,31.504 20.656,31.504 L16.811,31.504 Z" id="path-7" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path8" d="M6,37.555 L32.076,37.555 L32.076,34.113 L6,34.113 L6,37.555 Z M6,5.442 L32.076,5.442 L32.076,2 L6,2 L6,5.442 Z M28.473,34.113 C28.473,32.544 28.51,31.027 28.463,29.513 C28.414,27.939 27.727,26.637 26.504,25.654 C24.768,24.258 23.005,22.896 21.253,21.52 C20.514,20.94 19.776,20.361 19.033,19.777 C16.577,21.678 14.153,23.545 11.738,25.426 C10.312,26.537 9.579,27.998 9.59,29.82 C9.597,31.105 9.591,32.39 9.591,33.675 L9.591,34.113 L28.473,34.113 Z M28.486,5.442 L28.486,5.879 C28.486,7.164 28.48,8.449 28.487,9.735 C28.497,11.557 27.765,13.017 26.339,14.128 C23.924,16.009 21.499,17.877 19.044,19.777 C18.301,19.194 17.563,18.614 16.824,18.034 C15.072,16.658 13.309,15.297 11.573,13.901 C10.35,12.917 9.663,11.616 9.613,10.041 C9.567,8.527 9.603,7.01 9.603,5.442 L28.486,5.442 Z" id="path-8" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path9" d="M8.376,18.916 L4.947,18.916 L8.376,18.916 Z M32.884,18.916 L29.455,18.916 L32.884,18.916 Z M18.916,29.456 L18.916,32.885 L18.916,29.456 Z M18.916,4.947 L18.916,8.376 L18.916,4.947 Z M18.916,11.528 L18.916,18.916 L23.597,21.513 L18.916,11.528 Z M18.916,3.982 C10.668,3.982 3.981,10.668 3.981,18.916 C3.981,27.164 10.668,33.85 18.916,33.85 C27.164,33.85 33.85,27.164 33.85,18.916 C33.85,10.668 27.164,3.982 18.916,3.982 Z M36.832,18.916 C36.832,28.811 28.81,36.832 18.916,36.832 C9.021,36.832 1,28.811 1,18.916 C1,9.021 9.021,1 18.916,1 C28.81,1 36.832,9.021 36.832,18.916 Z" id="path-9" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path10" d="M8.51725,1 C2.49425,7.023 2.49425,16.789 8.51725,22.812 L8.51725,1 Z M11.20525,3.688 C6.66625,8.227 6.66625,15.585 11.20525,20.124 L11.20525,3.688 Z M13.90725,6.39 C10.86125,9.437 10.86125,14.375 13.90725,17.421 L13.90725,6.39 Z M28.41325,22.812 C34.43625,16.789 34.43625,7.023 28.41325,1 L28.41325,22.812 Z M25.72525,20.124 C30.26425,15.585 30.26425,8.227 25.72525,3.688 L25.72525,20.124 Z M23.02325,17.421 C26.07025,14.375 26.07025,9.437 23.02325,6.39 L23.02325,17.421 Z M18.46525,8.857 C16.78125,8.857 15.41625,10.222 15.41625,11.906 C15.41625,13.59 16.78125,14.955 18.46525,14.955 C20.14925,14.955 21.51425,13.59 21.51425,11.906 C21.51425,10.222 20.14925,8.857 18.46525,8.857 Z M13.54525,36.926 L23.38625,36.926 L13.54525,36.926 Z M19.81225,14.772 L19.81225,36.926 L17.17325,36.926 L17.17325,14.772 L19.81225,14.772 Z" id="path-10" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path11" d="M17.469,25.0214176 L17.469,37.4894176 L20.207,37.4894176 L20.207,25.0214176 L17.469,25.0214176 Z M11,17.7404176 C11.06,23.1614176 16.63,26.7324176 21.818,24.7004176 C24.845,23.5144176 26.687,20.8584176 26.694,17.6164176 L11,17.7404176 Z M13.945,11.7294176 C13.945,13.7154176 13.927,15.7014176 13.948,17.6884176 C13.986,21.2544176 17.459,23.6044176 20.694,22.2664176 C22.582,21.4864176 23.731,19.7394176 23.735,17.6064176 C23.741,13.8474176 23.739,11.2024176 23.734,7.44341762 C23.733,7.04241762 23.711,6.63841762 23.666,6.24041762 C23.367,3.58541762 20.774,1.62941762 18.138,2.05941762 C15.645,2.46641762 13.961,4.42641762 13.947,6.95941762 C13.936,8.91941762 13.945,9.76741762 13.945,11.7294176 Z M12.343,37.4894176 L18.838,37.4894176 L25.334,37.4894176 L12.343,37.4894176 Z" id="path-11" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path12" d="M17.946,7.236 L17.946,30.993 L17.946,7.236 Z M30.947,31.578 C37.851,24.674 37.851,13.48 30.947,6.576 L30.947,31.578 Z M27.866,28.497 C33.069,23.295 33.069,14.86 27.866,9.657 L27.866,28.497 Z M24.768,25.4 C28.26,21.907 28.26,16.246 24.768,12.755 L24.768,25.4 Z M21.006,6 L5.476,13.384 L5.476,24.77 L21.006,32.153 L21.006,6 Z M1,24.695 L5.476,24.695 L5.476,13.459 L1,13.459 L1,24.695 Z" id="path-12" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path13" d="M25.933,12.356 C25.933,14.21 27.436,15.712 29.289,15.712 C31.143,15.712 32.646,14.21 32.646,12.356 C32.646,10.502 31.143,9 29.289,9 C27.436,9 25.933,10.502 25.933,12.356 Z M26.973,25.385 L36.664,25.385 C36.664,21.204 33.275,17.814 29.094,17.814 C26.377,17.814 23.994,19.246 22.659,21.396 L26.973,25.385 Z M8.374,9 C6.52,9 5.018,10.502 5.018,12.356 C5.018,14.21 6.52,15.712 8.374,15.712 C10.228,15.712 11.73,14.21 11.73,12.356 C11.73,10.502 10.228,9 8.374,9 Z M15.005,21.396 C13.67,19.246 11.287,17.814 8.57,17.814 C4.389,17.814 1,21.204 1,25.385 L10.691,25.385 L15.005,21.396 Z M18.626,10.098 C16.403,10.098 14.601,11.9 14.601,14.124 C14.601,16.347 16.403,18.149 18.626,18.149 C20.849,18.149 22.651,16.347 22.651,14.124 C22.651,11.9 20.849,10.098 18.626,10.098 Z M27.939,29.488 L9.782,29.488 C9.782,24.474 13.847,20.409 18.861,20.409 C23.874,20.409 27.939,24.474 27.939,29.488 Z" id="path-13" stroke="#252525" stroke-width="1.2"></path>
                <path ref="path14" d="M14.958,6.4263487 L17.41,5.1273487 C18.05,4.7883487 18.293,3.9953487 17.955,3.3563487 L17.606,2.6973487 C17.267,2.0573487 16.474,1.8143487 15.834,2.1523487 L13.382,3.4513487 C12.743,3.7903487 12.499,4.5833487 12.838,5.2223487 L13.187,5.8813487 C13.525,6.5213487 14.318,6.7643487 14.958,6.4263487 Z M13.197,5.7933487 L7.581,8.7753487 L7.581,15.5513487 L13.197,5.7933487 Z M3,18.2973487 L34.916,18.2973487 L34.916,15.5513487 L3,15.5513487 L3,18.2973487 Z M34.048,24.2113487 L34.048,18.2973487 L3.867,18.2973487 L3.867,24.2113487 L34.048,24.2113487 Z M24.975,24.4893487 C24.975,25.7653487 26.008,26.7993487 27.283,26.7993487 C28.559,26.7993487 29.592,25.7653487 29.592,24.4893487 C29.592,23.2153487 28.559,22.1803487 27.283,22.1803487 C26.008,22.1803487 24.975,23.2153487 24.975,24.4893487 Z M25.216,34.5893487 L32.667,34.5893487 C32.667,31.3743487 30.062,28.7693487 26.847,28.7693487 C24.758,28.7693487 22.926,29.8693487 21.9,31.5233487 L25.216,34.5893487 Z M10.576,22.1493487 C9.301,22.1493487 8.268,23.1823487 8.268,24.4573487 C8.268,25.7333487 9.301,26.7663487 10.576,26.7663487 C11.852,26.7663487 12.885,25.7333487 12.885,24.4573487 C12.885,23.1823487 11.852,22.1493487 10.576,22.1493487 Z M16.016,31.5233487 C14.989,29.8693487 13.157,28.7693487 11.068,28.7693487 C7.854,28.7693487 5.249,31.3743487 5.249,34.5893487 L12.699,34.5893487 L16.016,31.5233487 Z M18.772,22.5803487 C17.063,22.5803487 15.678,23.9663487 15.678,25.6753487 C15.678,27.3843487 17.063,28.7693487 18.772,28.7693487 C20.481,28.7693487 21.867,27.3843487 21.867,25.6753487 C21.867,23.9663487 20.481,22.5803487 18.772,22.5803487 Z M25.959,37.7433487 L12,37.7433487 C12,33.8893487 15.125,30.7643487 18.98,30.7643487 C22.834,30.7643487 25.959,33.8893487 25.959,37.7433487 Z" id="path-14" stroke="#252525" stroke-width="1.2"></path>
            </g>
        </svg>
    </div>
</template>

<script>
import {TweenMax} from 'gsap'
import MorphSVGPlugin from 'gsap/MorphSVGPlugin'

export default {
    name: 'PreLoader',
    data: function() {
        return {
            interval: null,
        }
    },
    methods: {
        animateIn: function() {
            var t1 = new TimelineMax()
            t1.set(this.$refs.preloader, {
                display: 'flex',
                opacity: 1,
            })

            var t2 = new TimelineMax({repeat: -1})
            t2.to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path3,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path4,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path6,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path7,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path8,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path11,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path13,
                })
                .to(this.$refs.path1, 0.5, {
                    delay: 1,
                    morphSVG: this.$refs.path1,
                })


            var t3 = new TimelineMax({repeat: -1})
            t3.to(this.$refs.text, 1.5, {
                    color: '#ff636e',
                })
                .to(this.$refs.text, 1.5, {
                    delay: 1,
                    color: 'rgb(232, 163, 96)'
                })
                .to(this.$refs.text, 1.5, {
                    delay: 1,
                    color: 'rgb(233, 200, 69)'
                })
                .to(this.$refs.text, 1.5, {
                    delay: 1,
                    color: 'rgb(183, 204, 94)'
                })
                .to(this.$refs.text, 1.5, {
                    delay: 1,
                    color: 'rgb(149, 226, 218)'
                })
                .to(this.$refs.text, 1.5, {
                    delay: 1,
                    color: 'rgb(255, 99, 110)'
                })

            var master = new TimelineMax()
            master.add(t1)
            master.add(t2, .5)
            master.add(t3, .5)
            master.play()
        },
        loading: function() {
            // Animazione per il caricamento
            this.animateIn()
            this.interval = setInterval(() => {
                if(document.readyState === 'complete') {
                    clearInterval(this.interval)
                    this.done()
                }
            }, 100)
        },
        done: function() {
            var t1 = new TimelineMax()
            t1.to(this.$refs.preloader, 1, {
                delay: 1,
                display: 'none',
                opacity: 0,
            })
        }
    },
    mounted: function() {
        this.loading()
    }
}
</script>

<style lang="scss">
@import '~styles/shared';

#preloader-frame {
    position: fixed;
    width: 100%;
    height: 100vh;
    background-color: $white;
    z-index: 9998;
    // display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    display: none;
    opacity: 0;

    #loading {
        #path-2,
        #path-3,
        #path-4,
        #path-5,
        #path-6,
        #path-7,
        #path-8,
        #path-9,
        #path-10,
        #path-11,
        #path-12,
        #path-13,
        #path-14 {
            visibility: hidden;
        }
    }
}
</style>
